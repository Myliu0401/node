<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* 
                    这个 net模块 有网络那块的http协议的知识,所以必须依赖http的知识才能学net模块            


                  客户端与服务器之间的链接 都要进行 三次握手 和四次挥手
                      握手表示链接成功     挥手表示结束链接
                      只有链接了才可以请求服务器,服务器才可以发回响应

                  回顾http请求     http协议是建立在TCP/IP协议基础上的。
                          分两种: 
                             普通模式: 也就是 发出请求  服务器发回响应   链接就结束
                                 每次请求都要建立握手,结束要挥手 有点耗效率

                             长链接模式: 发出请求 服务器发回响应后不会立即 挥手结束,要等着“还有没有事”     
 
                       

                 net模块 
                      是一个通信模块。
                       
                      TCP/IP 协议: 负责握手和挥手,建立连接通道双方可以互传,怎么传都可以。除非有一方断开链接,才会结束。

                      这个模块可以实现 网络通信(TCP/IP)协议。           

                    创建TCP/IP协议的客户端:  (客户端就是访问服务器的那个程序)
                        net.createConnection(配置对象,回调函数)
                                  配置对象里的属性: 
                                                host: 'url地址'  (不用加上协议,因为是 TCP/IP 协议)
                                                port:端口号  (必须写上,不像http协议有默认值)
                          建立链接成功后会执行回调函数  
                          
                        这个协议没有约定请求的消息格式  
                        执行这个createConnection函数相当于与服务器建立链接
                          
                        这个 createConnection函数返回一个 socket对象
                             这个socket对象相当于是一个特殊的文件,当向这个文件写入内容时会向链接的服务器
                             发送数据,服务器发回响应,也可以通过读取该文件取到数据。这个socket文件跟网卡关联的。
                             这个socket对象就是一个双工流。
  
                        这个协议只能手动断开链接。
                        socket对象里end方法 表示关闭文件, 只有关闭文件才会断开链接


                    创建TCP/IP协议的服务器:   (这个协议的服务器不会像http协议的服务器,发回响应后就会断开链接)
                           net.createServer()   不用传参数
                           这个方法会返回一个 server 对象
                                    这个 server 对象里的属性：
                                                        listen(端口号)     表示这个服务器监听的端口号
                            
                                                        on函数      用于注册事件
                                                            传两个参数  第一个为事件名  第二个为处理函数
                                                            事件名: 
                                                                listening     服务器监听端口后会触发该事件

                                                                connection    有客户端连接到这个服务器就会触发该事件
                                                                   这个事件的处理函数 会接收一个参数为 socket对象
                                                                   这个socket对象跟 客户端的socket对象一样为双工流
                                                                   写入就发送给客户端,读取的就是客户端发送过来的内容

                                                                    socket对象里end方法 表示关闭文件, 只有关闭文件才会断开链接
                                                                    
                                                               
                      
                                                       
                //========================================================================
                     无论是浏览器还是其他,最开始与服务器链接时,都会发两次链接,第一次为测试链接,测试成功后再链接一次
                 
                                 
                                              
                        

        
        
        
        */
    </script>
</body>

</html>